<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="How long has Kirae been offline?" />
    <meta property="og:site_name" content="Kirae doko?" />
    <meta property="og:type" content="website" />
    <meta
      property="og:description"
      content="Use this to peer pressure her into streaming"
    />
    <meta
      property="og:image"
      content="https://raw.githubusercontent.com/narendnp/kirae-doko/main/img/notlikethis.png"
    />
    <meta property="og:url" content="https://kirae-doko.pages.dev" />
    <title>Kirae doko?</title>
    <link rel="icon" type="image/png" href="img/notlikethis.png" />
    <!-- Tailwind CSS for minimal styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Moment.js for time calculations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <!-- Add Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
      :root {
        --dark-purple: #2d1b36;
        --emerald-red: #ff3366;
        --tint-blue: #4a90e2;
      }
      body {
        background-color: var(--dark-purple);
        color: white;
        font-family: "Inter", sans-serif;
      }
      .gradient-text {
        background: linear-gradient(
          45deg,
          var(--emerald-red),
          var(--tint-blue)
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .counter {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .bg-image {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0.03;
        z-index: 0;
      }
      .content-wrapper {
        position: relative;
        z-index: 1;
      }
      .twitch-button {
        position: relative;
        z-index: 2;
      }
      .footer {
        position: fixed;
        bottom: 2rem;
        width: 100%;
        padding: 1rem;
        text-align: center;
        z-index: 2;
      }
      .social-icon {
        width: 20px;
        height: 20px;
        display: inline-block;
        vertical-align: middle;
        margin: 0 5px;
        opacity: 0.7;
        transition: opacity 0.3s ease;
      }
      .social-icon:hover {
        opacity: 1;
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col items-center justify-center p-4">
    <img src="img/bg.png" alt="Background" class="bg-image" />
    <img
      src="img/notlikethis.png"
      alt="NotLikeThis"
      class="w-32 md:w-48 mb-6"
    />

    <h1 class="text-4xl md:text-6xl font-bold mb-8 gradient-text">
      I Miss Kirae :(
    </h1>

    <div class="text-2xl md:text-3xl mb-8">Time since last stream:</div>

    <div
      id="counter"
      class="counter text-3xl md:text-5xl font-bold mb-8 text-[#FF3366]"
    >
      Loading...
    </div>

    <div class="text-xl mb-4">Last stream was on:</div>
    <div class="text-xl mb-4">
      <span id="lastStreamDate" class="text-[#4A90E2]">Loading...</span>
    </div>
    <div class="flex gap-4 z-10">
      <a
        href="https://www.twitch.tv/kirae_tomaru/videos"
        target="_blank"
        class="twitch-button px-6 py-3 bg-[#9146FF] hover:bg-[#772CE8] rounded-lg transition-colors duration-300 flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"
          />
        </svg>
        Watch her VODs
      </a>

      <a
        href="https://x.com/intent/tweet?text=@Kirae_Tomaru%20stream%20when%3F"
        target="_blank"
        class="px-6 py-3 bg-black hover:bg-zinc-800 rounded-lg transition-colors duration-300 flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
          />
        </svg>
        Tweet at her
      </a>
    </div>
    <footer class="footer">
      <div class="flex flex-col items-center gap-4">
        <div class="flex justify-center gap-6">
          <a
            href="https://github.com/narendnp/kirae-doko"
            target="_blank"
            class="text-white hover:text-[#FF3366] transition-colors duration-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              />
            </svg>
          </a>
          <a
            href="https://x.com/narendnp_"
            target="_blank"
            class="text-white hover:text-[#FF3366] transition-colors duration-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
              />
            </svg>
          </a>
        </div>
      </div>
    </footer>

    <script>
      async function getLastStreamDate() {
        try {
          const response = await axios.get(
            "https://i-miss-kirae.narendnp.workers.dev/"
          );
          return moment(response.data.lastStreamDate);
        } catch (error) {
          console.error("Error fetching last stream date:", error);
          return moment(); // Return current time as fallback
        }
      }

      async function updateCounter() {
        const lastStream = await getLastStreamDate();
        const now = moment();
        const duration = moment.duration(now.diff(lastStream));

        const days = Math.floor(duration.asDays());
        const hours = duration.hours();
        const minutes = duration.minutes();
        const seconds = duration.seconds();

        document.getElementById(
          "counter"
        ).innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        document.getElementById("lastStreamDate").innerHTML = lastStream.format(
          "MMMM Do YYYY, h:mm:ss a"
        );
      }

      // Update counter every second
      setInterval(updateCounter, 1000);
      updateCounter();
    </script>
  </body>
</html>
